<!DOCTYPE html>
<html lang="sv">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bashins Budget ğŸ’›</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;1,400&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="wrap">
      <div class="stage">
        <!-- Start Screen -->
        <section id="startCard" class="start-screen">
          <div class="start-content">
            <h1 class="brand-title">ğŸ’› Bashins Budget</h1>
            <p class="start-description">
              <span class="greeting">Hej Ã¤lskling!</span><br />
              Jag skapade en hemsida sÃ¥ att du kan bygga upp en budget fÃ¶r nÃ¤sta
              mÃ¥nad utefter dina inkomster och utgifter. Kom ihÃ¥g att skriva i
              var dina pengar gÃ¥r hÃ¤r bara sÃ¥ ska vi lyckas spara pengar. Ha en
              fin dag, Ã¤lskar dig!
            </p>
            <p class="storage-notice">
              Klicka "Starta Bashins Budget" fÃ¶rsta gÃ¥ngen och "Ladda Bashins
              Budget" nÃ¤r du ska lÃ¤gga in en utgift framÃ¶ver.
            </p>
            <div class="start-actions">
              <button
                id="startBtn"
                class="btn btn-primary"
                aria-label="Starta Bashins Budget"
              >
                Starta Bashins Budget ğŸ’›
              </button>
              <button
                id="loadBtn"
                class="btn btn-secondary"
                aria-label="Ladda Bashins Budget"
              >
                Ladda Bashins Budget ğŸ’›
              </button>
            </div>
          </div>
        </section>

        <!-- Dashboard -->
        <section id="dashboard" class="dashboard" style="display: none">
          <!-- Header -->
          <header class="header-row">
            <h1 class="brand-title">ğŸ’› Bashins Budget</h1>
          </header>

          <!-- Main Grid -->
          <div class="grid">
            <!-- Left Panel: Budget & Expenses -->
            <div class="panel left-panel">
              <!-- Budget Table -->
              <div class="section">
                <h2>ğŸ“ Steg 2: Skapa budget utefter inkomsterna</h2>
                <p class="budget-instruction">
                  NÃ¤r du har registrerat inkomsterna ovan, fÃ¶rdela dem Ã¶ver
                  kategorierna nedan.
                </p>
                <div class="table-container">
                  <table
                    id="budgetTable"
                    role="table"
                    aria-label="Budget tabell med kategorier och belopp"
                  >
                    <thead>
                      <tr>
                        <th>Kategori</th>
                        <th>Startbudget</th>
                        <th>Utgifter</th>
                        <th>Ã…terstÃ¥ende</th>
                      </tr>
                    </thead>
                    <tbody id="budgetBody">
                      <!-- Rendered by JavaScript -->
                    </tbody>
                  </table>
                </div>
                <div class="budget-actions">
                  <button
                    id="saveBudgetBtn"
                    class="btn btn-primary"
                    aria-label="Spara budget"
                  >
                    ğŸ’¾ Spara budget
                  </button>
                </div>
              </div>

              <!-- Register Expense -->
              <div class="section">
                <h3>ğŸ’¸ Steg 3: Registrera utgifter under mÃ¥naden</h3>
                <div class="form-group">
                  <label for="expenseCategory">Kategori:</label>
                  <select
                    id="expenseCategory"
                    aria-label="VÃ¤lj kategori fÃ¶r utgift"
                  >
                    <!-- Populated by JavaScript -->
                  </select>
                </div>
                <div class="form-group">
                  <label for="expenseDesc">Beskrivning:</label>
                  <input
                    type="text"
                    id="expenseDesc"
                    placeholder="Vad kÃ¶pte du?"
                    aria-label="Beskrivning av utgift"
                  />
                </div>
                <div class="form-group">
                  <label for="expenseAmount">Belopp (kr):</label>
                  <input
                    type="number"
                    id="expenseAmount"
                    step="0.01"
                    min="0"
                    placeholder="0.00"
                    aria-label="Belopp i kronor"
                  />
                </div>
                <button
                  id="addExpenseBtn"
                  class="btn btn-primary"
                  aria-label="LÃ¤gg till utgift"
                >
                  LÃ¤gg till utgift
                </button>
              </div>

              <!-- Recent Transactions -->
              <div class="section">
                <h3>Senaste transaktioner</h3>
                <div
                  id="txList"
                  class="transaction-list"
                  role="list"
                  aria-label="Lista Ã¶ver senaste utgifter"
                >
                  <!-- Rendered by JavaScript -->
                </div>
              </div>
            </div>

            <!-- Right Panel: Income & Summary -->
            <div class="panel right-panel">
              <!-- Income First -->
              <div class="section income-section">
                <h2>ğŸ’° Steg 1: Registrera inkomster fÃ¶r mÃ¥naden</h2>
                <div class="form-group">
                  <label for="incomeSource">KÃ¤lla:</label>
                  <select id="incomeSource" aria-label="VÃ¤lj inkomstkÃ¤lla">
                    <option value="CSN">CSN</option>
                    <option value="Jobb">Jobb</option>
                    <option value="Extra">Extra</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="incomeAmount">Belopp (kr):</label>
                  <input
                    type="number"
                    id="incomeAmount"
                    step="0.01"
                    min="0"
                    placeholder="0.00"
                    aria-label="Inkomstbelopp i kronor"
                  />
                </div>
                <button
                  id="addIncomeBtn"
                  class="btn btn-primary"
                  aria-label="LÃ¤gg till inkomst"
                >
                  LÃ¤gg till inkomst
                </button>
              </div>

              <!-- Income List -->
              <div class="section income-history-section">
                <h3>ğŸ“‹ Inkomsthistorik fÃ¶r mÃ¥naden</h3>
                <div
                  id="incomeList"
                  class="income-list"
                  role="list"
                  aria-label="Lista Ã¶ver inkomster"
                >
                  <!-- Rendered by JavaScript -->
                </div>
              </div>

              <!-- Total Income Display -->
              <div class="section income-total-section">
                <h3>ğŸ’° Total inkomst denna mÃ¥nad</h3>
                <div class="income-total-display">
                  <span
                    id="totalIncome"
                    class="income-total-amount"
                    aria-label="Total inkomst fÃ¶r mÃ¥naden"
                  >
                    0 kr
                  </span>
                </div>
              </div>

              <!-- Total Summary -->
              <div class="section summary-card">
                <h2>ğŸ“Š Summering (Inkomster - Utgifter)</h2>
                <div class="summary-explanation">
                  <p>
                    <strong>Formel:</strong> Total inkomst - Total utgifter =
                    Kvarvarande
                  </p>
                </div>
                <div class="summary-breakdown">
                  <div class="summary-row">
                    <span class="summary-label">Total inkomst:</span>
                    <span id="summaryIncome" class="summary-amount positive"
                      >0 kr</span
                    >
                  </div>
                  <div class="summary-row">
                    <span class="summary-label">Total utgifter:</span>
                    <span id="summaryExpenses" class="summary-amount negative"
                      >0 kr</span
                    >
                  </div>
                  <div class="summary-row total-row">
                    <span class="summary-label">Kvarvarande:</span>
                    <span
                      id="totalRemaining"
                      class="total-amount"
                      aria-label="Kvarvarande efter utgifter"
                    >
                      0 kr
                    </span>
                  </div>
                </div>
              </div>

              <!-- Actions -->
              <div class="section actions-section">
                <button
                  id="saveBtn"
                  class="btn btn-primary save-main-btn"
                  aria-label="Spara data"
                >
                  Spara
                </button>
              </div>
            </div>
          </div>

          <!-- Footer -->
          <footer class="footer-row">
            <button
              id="exportBtn"
              class="btn btn-secondary"
              aria-label="Exportera data som JSON"
            >
              Exportera (JSON)
            </button>
            <button
              id="resetBtn"
              class="btn btn-secondary"
              aria-label="Ã…terstÃ¤ll all data"
            >
              Ã…terstÃ¤ll data (Ny mÃ¥nad)
            </button>
          </footer>
        </section>
      </div>
    </div>

    <!-- 
    README & TESTSTEG fÃ¶r Bashins Budget
    
    LOCALSTORAGE KEY: bashinsBudgetData_v1
    
    TESTSTEG:
    1. Start: Ã¶ppna index.html, klicka "Starta Bashins Budget ğŸ’›", dashboard visas
    2. Budget: skriv 2000 i Mat-kolumn â†’ stÃ¤ng & Ã¶ppna sidan â†’ vÃ¤rdet finns kvar
    3. Utgift: vÃ¤lj Mat, belopp 45.5, beskrivning "Lunch" â†’ transaktionen visas i listan
    4. Ta bort: klicka "Ta bort" pÃ¥ en transaktion â†’ totals uppdateras
    5. Exportera: klicka "Exportera (JSON)" â†’ JSON-fil laddas ner
    6. Ã…terstÃ¤ll: klicka "Ã…terstÃ¤ll data" â†’ rensa localStorage och Ã¥terstÃ¤ll default-data
    7. Mobil: Ã¶ppna i small viewport, kontrollera att layouten Ã¤r lÃ¤sbar
    
    DATASTRUKTUR (localStorage):
    {
      "expenseCategories": ["Hyra","Mat","EgenvÃ¥rd","Transport","NÃ¶je","Abonnemang","KlÃ¤der","Presenter","Resor","HÃ¤lsa & trÃ¤ning","Sparande","Ã–vrigt"],
      "incomeCategories": ["CSN","Jobb","Extra"],
      "budgets": {"Mat": 2500, "Hyra": 6500},
      "expenses": [{"id": 12345, "category":"Mat","amount":45.5,"desc":"Lunch","date":"2025-01-20T..."}],
      "incomes": [{"id": 67890, "source":"Jobb","amount":12000,"date":"2025-01-01T..."}]
    }
    -->

    <script src="script.js"></script>
  </body>
</html>
